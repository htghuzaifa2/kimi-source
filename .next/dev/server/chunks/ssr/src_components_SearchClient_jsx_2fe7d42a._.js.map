{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/MOVIES/New%20folder/K/kimi/src/components/SearchClient.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { Search as SearchIcon, X } from 'lucide-react';\r\nimport { products } from '../data/products';\r\n// import '../pages/SearchResults.css';\r\n\r\n// We need a wrapper component for Suspense too if we were to export it directly, but let's do the logic here.\r\nconst SearchClient = () => {\r\n    const searchParams = useSearchParams();\r\n    const q = searchParams.get('q');\r\n    const [query, setQuery] = useState(q || '');\r\n\r\n    useEffect(() => {\r\n        if (q) {\r\n            setQuery(q);\r\n        }\r\n    }, [q]);\r\n\r\n    const results = useMemo(() => {\r\n        if (!query.trim()) return [];\r\n\r\n        const normalizedQuery = query.toLowerCase().trim();\r\n        const words = normalizedQuery.split(/\\s+/);\r\n        const isNumericSearch = /^\\d+$/.test(normalizedQuery);\r\n\r\n        // Priority 0: Exact ID match\r\n        if (isNumericSearch) {\r\n            const idMatches = products.filter(p => p.id.toString() === normalizedQuery);\r\n            if (idMatches.length > 0) return idMatches;\r\n        }\r\n\r\n        // Priority 1: Partial ID match\r\n        let idPartialMatches = [];\r\n        if (isNumericSearch) {\r\n            idPartialMatches = products.filter(p => p.id.toString().includes(normalizedQuery));\r\n        }\r\n\r\n        // Priority 2: First word exact match\r\n        let firstWordMatches = products.filter(p => {\r\n            const name = p.name.toLowerCase();\r\n            const nameWords = name.split(/\\s+/);\r\n            return nameWords.some(word => word.startsWith(words[0]));\r\n        });\r\n\r\n        // Priority 3: Any word exact match\r\n        let anyWordMatches = products.filter(p => {\r\n            const name = p.name.toLowerCase();\r\n            return words.every(queryWord =>\r\n                name.split(/\\s+/).some(nameWord => nameWord.startsWith(queryWord))\r\n            );\r\n        });\r\n\r\n        // Priority 4: Fuzzy match\r\n        let fuzzyMatches = products.filter(p => {\r\n            const searchableText = `${p.name} ${p.category} ${p.subCategory || ''} ${p.productType}`.toLowerCase();\r\n            return words.some(word => searchableText.includes(word));\r\n        });\r\n\r\n        // Combine results\r\n        const allMatches = [\r\n            ...idPartialMatches,\r\n            ...firstWordMatches.filter(p => !idPartialMatches.find(m => m.id === p.id)),\r\n            ...anyWordMatches.filter(p =>\r\n                !idPartialMatches.find(m => m.id === p.id) &&\r\n                !firstWordMatches.find(m => m.id === p.id)\r\n            ),\r\n            ...fuzzyMatches.filter(p =>\r\n                !idPartialMatches.find(m => m.id === p.id) &&\r\n                !firstWordMatches.find(m => m.id === p.id) &&\r\n                !anyWordMatches.find(m => m.id === p.id)\r\n            )\r\n        ];\r\n\r\n        return allMatches;\r\n    }, [query]);\r\n\r\n    // Update query manually and push to URL\r\n    const handleSearch = (e) => {\r\n        e.preventDefault();\r\n        if (query.trim()) {\r\n            // In Next.js App router, we might want to push to URL or just update local state if we want instant feedback?\r\n            // The original code updated search params.\r\n            window.history.pushState(null, '', `?q=${encodeURIComponent(query.trim())}`);\r\n            // But we already have local state `query` so results update instantly.\r\n            // However, to keep URL in sync, we use history API or router.push (which triggers navigation).\r\n            // router.push is better.\r\n        }\r\n    };\r\n\r\n    // Actually, let's stick to updating state and optional URL sync.\r\n    // Or better, make it driven by URL state to support back button properly?\r\n    // The original uses useSearchParams which comes from URL.\r\n    // If we type in input, we update `query` state.\r\n    // If we submit, we update URL.\r\n\r\n    return (\r\n        <div className=\"search-results-page\">\r\n            <div className=\"container\">\r\n                <div className=\"search-page-header\">\r\n                    <h1 className=\"h2\">Search Products</h1>\r\n\r\n                    <form onSubmit={(e) => { e.preventDefault(); window.history.pushState(null, '', `?q=${encodeURIComponent(query.trim())}`); }} className=\"search-page-form\">\r\n                        <div className=\"search-page-input-wrapper\">\r\n                            <SearchIcon size={20} className=\"search-page-icon\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"search-page-input\"\r\n                                placeholder=\"Search by name, category, or ID...\"\r\n                                value={query}\r\n                                onChange={(e) => setQuery(e.target.value)}\r\n                            />\r\n                            {query && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"search-page-clear\"\r\n                                    onClick={() => { setQuery(''); window.history.pushState(null, '', `?q=`); }}\r\n                                >\r\n                                    <X size={18} />\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        <button type=\"submit\" className=\"btn btn-primary\">\r\n                            Search\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n\r\n                {query && (\r\n                    <div className=\"search-results-info\">\r\n                        <p>\r\n                            {results.length > 0\r\n                                ? `Found ${results.length} ${results.length === 1 ? 'product' : 'products'} for \"${query}\"`\r\n                                : `No products found for \"${query}\"`\r\n                            }\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {!query && (\r\n                    <div className=\"search-hints-page\">\r\n                        <p className=\"text-muted\">Start typing to search for products...</p>\r\n                        <div className=\"search-suggestions\">\r\n                            <span>Try: \"hoodie\" or ID like \"1\", \"2\", \"3\"</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {results.length > 0 && (\r\n                    <div className=\"product-grid\">\r\n                        {results.map((product) => (\r\n                            <div key={product.id} className=\"product-card fade-in\">\r\n                                <Link href={`/product/${product.slug}`} className=\"product-image-wrapper\">\r\n                                    <img src={product.image} alt={product.name} className=\"product-image\" />\r\n                                    <div className=\"product-overlay\">\r\n                                        <button className=\"btn btn-secondary quick-view-btn\">View Details</button>\r\n                                    </div>\r\n                                </Link>\r\n                                <div className=\"product-info\">\r\n                                    <span style={{ fontSize: '0.75rem', color: 'var(--color-text-light)', fontWeight: '500', marginBottom: '4px', display: 'block' }}>\r\n                                        ID: {product.id}\r\n                                    </span>\r\n                                    <Link href={`/product/${product.slug}`} className=\"product-title\">{product.name}</Link>\r\n                                    <div className=\"product-meta\">\r\n                                        <span className=\"product-price\">PKR {product.price.toLocaleString()}</span>\r\n                                        <div className=\"product-rating\">★★★★★</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchClient;\r\n"],"names":[],"mappings":"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"}}]
}