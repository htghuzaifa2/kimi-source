{"version":3,"sources":["../../../../src/components/SearchClient.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { Search as SearchIcon, X } from 'lucide-react';\r\nimport { products } from '../data/products';\r\n// import '../pages/SearchResults.css';\r\n\r\n// We need a wrapper component for Suspense too if we were to export it directly, but let's do the logic here.\r\nconst SearchClient = () => {\r\n    const searchParams = useSearchParams();\r\n    const q = searchParams.get('q');\r\n    const [query, setQuery] = useState(q || '');\r\n\r\n    useEffect(() => {\r\n        if (q) {\r\n            setQuery(q);\r\n        }\r\n    }, [q]);\r\n\r\n    const results = useMemo(() => {\r\n        if (!query.trim()) return [];\r\n\r\n        const normalizedQuery = query.toLowerCase().trim();\r\n        const words = normalizedQuery.split(/\\s+/);\r\n        const isNumericSearch = /^\\d+$/.test(normalizedQuery);\r\n\r\n        // Priority 0: Exact ID match\r\n        if (isNumericSearch) {\r\n            const idMatches = products.filter(p => p.id.toString() === normalizedQuery);\r\n            if (idMatches.length > 0) return idMatches;\r\n        }\r\n\r\n        // Priority 1: Partial ID match\r\n        let idPartialMatches = [];\r\n        if (isNumericSearch) {\r\n            idPartialMatches = products.filter(p => p.id.toString().includes(normalizedQuery));\r\n        }\r\n\r\n        // Priority 2: First word exact match\r\n        let firstWordMatches = products.filter(p => {\r\n            const name = p.name.toLowerCase();\r\n            const nameWords = name.split(/\\s+/);\r\n            return nameWords.some(word => word.startsWith(words[0]));\r\n        });\r\n\r\n        // Priority 3: Any word exact match\r\n        let anyWordMatches = products.filter(p => {\r\n            const name = p.name.toLowerCase();\r\n            return words.every(queryWord =>\r\n                name.split(/\\s+/).some(nameWord => nameWord.startsWith(queryWord))\r\n            );\r\n        });\r\n\r\n        // Priority 4: Fuzzy match\r\n        let fuzzyMatches = products.filter(p => {\r\n            const searchableText = `${p.name} ${p.category} ${p.subCategory || ''} ${p.productType}`.toLowerCase();\r\n            return words.some(word => searchableText.includes(word));\r\n        });\r\n\r\n        // Combine results\r\n        const allMatches = [\r\n            ...idPartialMatches,\r\n            ...firstWordMatches.filter(p => !idPartialMatches.find(m => m.id === p.id)),\r\n            ...anyWordMatches.filter(p =>\r\n                !idPartialMatches.find(m => m.id === p.id) &&\r\n                !firstWordMatches.find(m => m.id === p.id)\r\n            ),\r\n            ...fuzzyMatches.filter(p =>\r\n                !idPartialMatches.find(m => m.id === p.id) &&\r\n                !firstWordMatches.find(m => m.id === p.id) &&\r\n                !anyWordMatches.find(m => m.id === p.id)\r\n            )\r\n        ];\r\n\r\n        return allMatches;\r\n    }, [query]);\r\n\r\n    // Update query manually and push to URL\r\n    const handleSearch = (e) => {\r\n        e.preventDefault();\r\n        if (query.trim()) {\r\n            // In Next.js App router, we might want to push to URL or just update local state if we want instant feedback?\r\n            // The original code updated search params.\r\n            window.history.pushState(null, '', `?q=${encodeURIComponent(query.trim())}`);\r\n            // But we already have local state `query` so results update instantly.\r\n            // However, to keep URL in sync, we use history API or router.push (which triggers navigation).\r\n            // router.push is better.\r\n        }\r\n    };\r\n\r\n    // Actually, let's stick to updating state and optional URL sync.\r\n    // Or better, make it driven by URL state to support back button properly?\r\n    // The original uses useSearchParams which comes from URL.\r\n    // If we type in input, we update `query` state.\r\n    // If we submit, we update URL.\r\n\r\n    return (\r\n        <div className=\"search-results-page\">\r\n            <div className=\"container\">\r\n                <div className=\"search-page-header\">\r\n                    <h1 className=\"h2\">Search Products</h1>\r\n\r\n                    <form onSubmit={(e) => { e.preventDefault(); window.history.pushState(null, '', `?q=${encodeURIComponent(query.trim())}`); }} className=\"search-page-form\">\r\n                        <div className=\"search-page-input-wrapper\">\r\n                            <SearchIcon size={20} className=\"search-page-icon\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"search-page-input\"\r\n                                placeholder=\"Search by name, category, or ID...\"\r\n                                value={query}\r\n                                onChange={(e) => setQuery(e.target.value)}\r\n                            />\r\n                            {query && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"search-page-clear\"\r\n                                    onClick={() => { setQuery(''); window.history.pushState(null, '', `?q=`); }}\r\n                                >\r\n                                    <X size={18} />\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        <button type=\"submit\" className=\"btn btn-primary\">\r\n                            Search\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n\r\n                {query && (\r\n                    <div className=\"search-results-info\">\r\n                        <p>\r\n                            {results.length > 0\r\n                                ? `Found ${results.length} ${results.length === 1 ? 'product' : 'products'} for \"${query}\"`\r\n                                : `No products found for \"${query}\"`\r\n                            }\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {!query && (\r\n                    <div className=\"search-hints-page\">\r\n                        <p className=\"text-muted\">Start typing to search for products...</p>\r\n                        <div className=\"search-suggestions\">\r\n                            <span>Try: \"hoodie\" or ID like \"1\", \"2\", \"3\"</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {results.length > 0 && (\r\n                    <div className=\"product-grid\">\r\n                        {results.map((product) => (\r\n                            <div key={product.id} className=\"product-card fade-in\">\r\n                                <Link href={`/product/${product.slug}`} className=\"product-image-wrapper\">\r\n                                    <img src={product.image} alt={product.name} className=\"product-image\" />\r\n                                    <div className=\"product-overlay\">\r\n                                        <button className=\"btn btn-secondary quick-view-btn\">View Details</button>\r\n                                    </div>\r\n                                </Link>\r\n                                <div className=\"product-info\">\r\n                                    <span style={{ fontSize: '0.75rem', color: 'var(--color-text-light)', fontWeight: '500', marginBottom: '4px', display: 'block' }}>\r\n                                        ID: {product.id}\r\n                                    </span>\r\n                                    <Link href={`/product/${product.slug}`} className=\"product-title\">{product.name}</Link>\r\n                                    <div className=\"product-meta\">\r\n                                        <span className=\"product-price\">PKR {product.price.toLocaleString()}</span>\r\n                                        <div className=\"product-rating\">★★★★★</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchClient;\r\n"],"names":[],"mappings":"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"}